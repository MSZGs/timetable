{"version":3,"sources":["webpack://timetable/webpack/universalModuleDefinition","webpack://timetable/webpack/bootstrap","webpack://timetable/webpack/runtime/define property getters","webpack://timetable/webpack/runtime/hasOwnProperty shorthand","webpack://timetable/webpack/runtime/make namespace object","webpack://timetable/./build/utils/template.js","webpack://timetable/./build/utils/column-data.js","webpack://timetable/./build/utils/day.js","webpack://timetable/./build/utils/grid-column-label.js","webpack://timetable/./build/utils/grid-row-label.js","webpack://timetable/./build/utils/time.js","webpack://timetable/./build/timetable-item.js","webpack://timetable/./build/utils/grid-template-builders.js","webpack://timetable/./build/timetable-row.js","webpack://timetable/./build/timetable.js"],"names":["root","factory","exports","module","define","amd","a","undefined","mszgs","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_defineProperty","configurable","writable","templateHtmlString","_templateHtmlString","_template","document","createElement","innerHTML","styleString","style","template","appendChild","deep","content","cloneNode","ColumnData","row","start","denominator","span","_row","_start","_denominator","_span","data","split","map","x","parseInt","dayToId","day","parseDay","dayId","GridColumnLabel","numerator","gcd","_gcd","_numerator","y","Math","abs","t","l1","l2","absoluteValue","compare","GridRowLabel","time","_time","hour","min","Time","_min","_hour","floor","trunc","round","timeString","h","m","t2","t1","end","step","OneHour","add","TimeSpan","_end","other","isBefore","isAfter","range","TimetableItem","HTMLElement","super","attachShadow","mode","clone","_columnData","_panel","shadowRoot","querySelector","_title","keys","forEach","dataset","name","oldVal","newVal","updateGridRow","column","innerText","gridColumnStart","label","gridColumnEnd","gridRowStart","timeStart","gridRowEnd","timeEnd","updateGridColumn","n","parse","toString","title","customElements","elementName","GridTemplateRowBuilder","_data","_calculated","values","_minTime","fromAbsoluteValue","_maxTime","max","ceil","push","sort","css","index","length","current","next","equals","_css","join","_build","buildIfNot","GridTemplateColumnsBuilder","labels","i","k","sortedLabels","TimetableRow","_label","getElementById","_line","update","startLabel","endLabel","gridRow","hidden","IntersectCalculator","arr","_arr","isIntersect","graph","Array","item","array","int","Timetable","_grid","_timeline","_rows","Map","_changeObserver","MutationObserver","bind","observe","childList","attributes","attributeFilter","subtree","updateTemplateColumns","updateTemplateRows","builder","days","items","filter","b","addColumn","calc","set","Set","otherItem","config","size","columnData","concat","gridTemplateColumns","build","from","to","addTime","gridTemplateRows","updateRows","minTime","maxTime","hide","subtract","timeLabel","has","show","newRow","querySelectorAll"],"mappings":"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","file":"mszgs.timetable.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"timetable\"] = factory();\n\telse\n\t\troot[\"timetable\"] = factory();\n})(((a) => {if(a.mszgs === undefined) a.mszgs = {}; return a.mszgs})(this), function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport class Template {\n  constructor(templateHtmlString) {\n    _defineProperty(this, \"_template\", void 0);\n\n    _defineProperty(this, \"_templateHtmlString\", void 0);\n\n    this._templateHtmlString = templateHtmlString;\n    this._template = document.createElement(\"template\");\n    this._template.innerHTML = templateHtmlString;\n  }\n\n  addStyle(styleString) {\n    const style = document.createElement(\"style\");\n    style.innerHTML = styleString;\n    this.template.appendChild(style);\n  }\n\n  get templateHtmlString() {\n    return this._templateHtmlString;\n  }\n\n  get template() {\n    return this._template;\n  }\n\n  clone(deep = true) {\n    return this._template.content.cloneNode(deep);\n  }\n\n}\nexport default Template;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport class ColumnData {\n  constructor(row, start = 0, denominator = 1, span = 1) {\n    _defineProperty(this, \"_row\", void 0);\n\n    _defineProperty(this, \"_start\", void 0);\n\n    _defineProperty(this, \"_span\", void 0);\n\n    _defineProperty(this, \"_denominator\", void 0);\n\n    this._row = row;\n    this._start = start;\n    this._denominator = denominator;\n    this._span = span;\n  }\n\n  get row() {\n    return this._row;\n  }\n\n  get start() {\n    return this._start;\n  }\n\n  get span() {\n    return this._span;\n  }\n\n  get denominator() {\n    return this._span;\n  }\n\n  toString() {\n    return `${this._row}/${this._start}/${this._denominator}/${this._span}`;\n  }\n\n  static parse(data) {\n    const [row, start, denominator, span] = data.split(\"/\").map(x => parseInt(x));\n    return new ColumnData(row, start, denominator, span);\n  }\n\n}","export function dayToId(day) {\n  switch (day) {\n    case \"MON\":\n      return 1;\n\n    case \"TUE\":\n      return 2;\n\n    case \"WED\":\n      return 3;\n\n    case \"THU\":\n      return 4;\n\n    case \"FRI\":\n      return 5;\n\n    case \"SAT\":\n      return 6;\n\n    case \"SUN\":\n      return 7;\n\n    default:\n      return -1;\n  }\n}\nexport function parseDay(dayId) {\n  switch (dayId) {\n    case 1:\n      return \"MON\";\n\n    case 2:\n      return \"TUE\";\n\n    case 3:\n      return \"WED\";\n\n    case 4:\n      return \"THU\";\n\n    case 5:\n      return \"FRI\";\n\n    case 6:\n      return \"SAT\";\n\n    case 7:\n      return \"SUN\";\n\n    default:\n      return undefined;\n  }\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport class GridColumnLabel {\n  constructor(row, numerator = 0, denominator = 1) {\n    _defineProperty(this, \"_numerator\", void 0);\n\n    _defineProperty(this, \"_denominator\", void 0);\n\n    _defineProperty(this, \"_row\", void 0);\n\n    const gcd = this._gcd(numerator, denominator);\n\n    this._numerator = numerator / gcd;\n    this._denominator = denominator / gcd;\n    this._row = row;\n  }\n\n  _gcd(x, y) {\n    x = Math.abs(x);\n    y = Math.abs(y);\n\n    while (y > 0) {\n      const t = y;\n      y = x % y;\n      x = t;\n    }\n\n    return x;\n  }\n\n  get label() {\n    if (this._numerator === 0) {\n      return `c${this._row}`;\n    } else if (this._numerator === this._denominator) {\n      return `c${this._row + 1}`;\n    } else {\n      return `c${this._row}-${this._numerator}I${this._denominator}`;\n    }\n  }\n\n  get value() {\n    return this._numerator / this._denominator;\n  }\n\n  get absoluteValue() {\n    return this._row + this.value;\n  }\n\n  static compare(l1, l2) {\n    return l1.absoluteValue - l2.absoluteValue;\n  }\n\n  static equals(l1, l2) {\n    return GridColumnLabel.compare(l1, l2) === 0;\n  }\n\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport class GridRowLabel {\n  constructor(time) {\n    _defineProperty(this, \"_time\", void 0);\n\n    this._time = time;\n  }\n\n  get label() {\n    return `r${this._time.hour}-${this._time.min}`;\n  }\n\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport class Time {\n  constructor(hour, min) {\n    _defineProperty(this, \"_hour\", void 0);\n\n    _defineProperty(this, \"_min\", void 0);\n\n    this._min = min % 60;\n    this._hour = hour + Math.floor(min / 60);\n  }\n\n  get hour() {\n    return this._hour;\n  }\n\n  get min() {\n    return this._min;\n  }\n\n  get absoluteValue() {\n    return this.hour + this.min / 60;\n  }\n\n  toString() {\n    return `${this.hour > 9 ? \"\" : \"0\"}${this.hour}:${this.min > 9 ? \"\" : \"0\"}${this.min}`;\n  }\n\n  static fromAbsoluteValue(value) {\n    const hour = Math.trunc(value);\n    const min = Math.round((value - hour) * 60);\n    return new Time(hour, min);\n  }\n\n  static parse(timeString) {\n    if (timeString === undefined) {\n      return new Time(0, 0);\n    }\n\n    const [h, m] = timeString.split(\":\").map(x => parseInt(x));\n    return new Time(h, m);\n  }\n\n  isBefore(t2) {\n    return Time.compare(this, t2) < 1;\n  }\n\n  isAfter(t2) {\n    return Time.compare(this, t2) > 1;\n  }\n\n  add(t2) {\n    return new Time(this._hour + t2._hour, this._min + t2._min);\n  }\n\n  floor() {\n    return new Time(this._hour, 0);\n  }\n\n  ceil() {\n    return new Time(this._min > 0 ? this._hour + 1 : this._hour, 0);\n  }\n\n  subtract(t2) {\n    const min = this._min - t2._min;\n    const hour = this._hour - t2._hour;\n\n    if (min < 0) {\n      return new Time(hour - 1, min + 60);\n    }\n\n    return new Time(hour, min);\n  }\n\n  static compare(t1, t2) {\n    const a = t1._hour - t2._hour;\n    return a !== 0 ? a : t1._min - t2._min;\n  }\n\n  static equals(t1, t2) {\n    return Time.compare(t1, t2) === 0;\n  }\n\n  static *range(start, end, step = Time.OneHour) {\n    let x = start;\n\n    while (Time.compare(x, end) < 1) {\n      yield x;\n      x = x.add(step);\n    }\n  }\n\n}\n\n_defineProperty(Time, \"OneHour\", new Time(1, 0));\n\n_defineProperty(Time, \"OneMinute\", new Time(0, 1));\n\nexport class TimeSpan {\n  constructor(start, end) {\n    _defineProperty(this, \"_start\", void 0);\n\n    _defineProperty(this, \"_end\", void 0);\n\n    this._start = start;\n    this._end = end;\n  }\n\n  isIntersect(other) {\n    return this._start.isBefore(other._end) && this._end.isAfter(other._start);\n  }\n\n  range(step = Time.OneHour) {\n    return Time.range(this._start, this._end, step);\n  }\n\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { ColumnData } from \"./utils/column-data\";\nimport { dayToId } from \"./utils/day\";\nimport { GridColumnLabel } from \"./utils/grid-column-label\";\nimport { GridRowLabel } from \"./utils/grid-row-label\";\nimport Template from \"./utils/template\";\nimport { Time, TimeSpan } from \"./utils/time\";\nvar templateHtml = \"<style>\\r\\n  :host {\\r\\n    display: contents;\\r\\n  }\\r\\n\\r\\n  .panel {\\r\\n    font-size: 14px;\\r\\n    overflow: hidden;\\r\\n    text-align: left;\\r\\n    height: 100%;\\r\\n\\r\\n    background-color: #222 ;\\r\\n    border: 2px solid #337ab7;\\r\\n    border-radius: 4px;\\r\\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\\r\\n    box-sizing: border-box;\\r\\n    color: #EEE;\\r\\n    font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\r\\n    line-height: 1.42857143;\\r\\n    scrollbar-color: #333 #666;\\r\\n  }\\r\\n\\r\\n  .panel-heading {\\r\\n    background-color: #337ab7;\\r\\n    border-bottom: 1px solid #337ab7;\\r\\n    border-top-left-radius: 3px;\\r\\n    border-top-right-radius: 3px;\\r\\n  }\\r\\n\\r\\n  .panel-body {\\r\\n    padding: 7.5px;\\r\\n  }\\r\\n</style>\\r\\n\\r\\n<div class=\\\"panel\\\">\\r\\n  <div class=\\\"panel-heading\\\">\\r\\n    <span id=\\\"title\\\"> </span>\\r\\n  </div>\\r\\n  <div class=\\\"panel-body\\\">\\r\\n      <slot></slot>\\r\\n    </span>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nconst template = new Template(templateHtml);\nexport class TimetableItem extends HTMLElement {\n  static get observedAttributes() {\n    return [\"data-time-start\", \"data-time-end\", \"data-day\", \"data-title\"];\n  }\n\n  constructor(data = {}) {\n    super();\n\n    _defineProperty(this, \"_panel\", void 0);\n\n    _defineProperty(this, \"_columnData\", void 0);\n\n    _defineProperty(this, \"_title\", void 0);\n\n    this.attachShadow({\n      mode: \"open\"\n    }).appendChild(template.clone());\n    this._columnData = new ColumnData(0);\n    this._panel = this.shadowRoot.querySelector(\".panel\");\n    this._title = this.shadowRoot.querySelector(\"span#title\");\n    Object.keys(data).forEach(x => this.dataset[x] = data[x]);\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (newVal === null && oldVal === newVal) {\n      return;\n    }\n\n    if (name === \"data-time-start\" || name === \"data-time-end\") {\n      this.updateGridRow();\n    } else if (name === \"data-day\") {\n      this.column = new ColumnData(parseInt(newVal));\n    } else if (name === \"data-title\") {\n      this._title.innerText = newVal;\n    }\n  }\n\n  updateGridColumn() {\n    this._panel.style.gridColumnStart = new GridColumnLabel(dayToId(this.day), this.column.start, this.column.denominator).label;\n    this._panel.style.gridColumnEnd = new GridColumnLabel(dayToId(this.day), this.column.start + this.column.span, this.column.denominator).label;\n  }\n\n  updateGridRow() {\n    this._panel.style.gridRowStart = new GridRowLabel(this.timeStart).label;\n    this._panel.style.gridRowEnd = new GridRowLabel(this.timeEnd).label;\n  }\n\n  update() {\n    this.updateGridColumn();\n    this.updateGridRow();\n  }\n\n  get column() {\n    return this._columnData;\n  }\n\n  set column(n) {\n    this._columnData = n;\n    this.updateGridColumn();\n  }\n\n  get timeStart() {\n    return Time.parse(this.dataset[\"timeStart\"]);\n  }\n\n  set timeStart(time) {\n    this.dataset[\"timeStart\"] = time.toString();\n  }\n\n  get timeEnd() {\n    return Time.parse(this.dataset[\"timeEnd\"]);\n  }\n\n  set timeEnd(time) {\n    this.dataset[\"timeEnd\"] = time.toString();\n  }\n\n  get time() {\n    return new TimeSpan(this.timeStart, this.timeEnd);\n  }\n\n  get day() {\n    return this.dataset[\"day\"];\n  }\n\n  set day(day) {\n    this.dataset[\"day\"] = day;\n  }\n\n  get title() {\n    return this.dataset[\"title\"];\n  }\n\n  set title(title) {\n    this.dataset[\"title\"] = title;\n  }\n\n}\n\n_defineProperty(TimetableItem, \"elementName\", \"mszgs-timetable-item\");\n\ncustomElements.define(TimetableItem.elementName, TimetableItem);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { GridColumnLabel } from \"./grid-column-label\";\nimport { GridRowLabel } from \"./grid-row-label\";\nimport { Time } from \"./time\";\nexport class GridTemplateRowBuilder {\n  constructor(data = []) {\n    _defineProperty(this, \"_data\", void 0);\n\n    _defineProperty(this, \"_css\", void 0);\n\n    _defineProperty(this, \"_minTime\", void 0);\n\n    _defineProperty(this, \"_maxTime\", void 0);\n\n    _defineProperty(this, \"_calculated\", void 0);\n\n    this._data = data;\n    this._calculated = false;\n  }\n\n  _build() {\n    const values = this._data.map(x => x.absoluteValue);\n\n    this._minTime = Time.fromAbsoluteValue(Math.min(...values)).floor();\n    this._maxTime = Time.fromAbsoluteValue(Math.max(...values)).ceil();\n\n    this._data.push(...Time.range(this._minTime, this._maxTime));\n\n    const data = this._data.sort(Time.compare);\n\n    const css = [\"[header] 50px\"];\n\n    for (let index = 0; index < data.length - 1; index++) {\n      const current = data[index];\n      const next = data[index + 1];\n\n      if (Time.equals(current, next)) {\n        continue;\n      }\n\n      const value = next.absoluteValue - current.absoluteValue;\n      const label = new GridRowLabel(current);\n      css.push(`[${label.label}] ${value}fr`);\n    }\n\n    css.push(\"[end]\");\n    this._css = css.join(\" \");\n    this._calculated = true;\n  }\n\n  buildIfNot() {\n    if (!this._calculated) {\n      this._build();\n    }\n  }\n\n  addTime(time) {\n    this._data.push(time);\n\n    this._calculated = false;\n  }\n\n  minTime() {\n    this.buildIfNot();\n    return this._minTime;\n  }\n\n  maxTime() {\n    this.buildIfNot();\n    return this._maxTime;\n  }\n\n  build() {\n    this.buildIfNot();\n    return this._css;\n  }\n\n}\nexport class GridTemplateColumnsBuilder {\n  constructor(data = []) {\n    _defineProperty(this, \"_data\", void 0);\n\n    this._data = data;\n  }\n\n  addColumn(data = [1]) {\n    this._data.push(data);\n  }\n\n  build() {\n    const data = this._data;\n    const css = [\"[start] 64px\"];\n    const labels = [];\n\n    for (let i = 0; i < data.length; i++) {\n      data[i].forEach(x => {\n        for (let k = 0; k < x; k++) {\n          labels.push(new GridColumnLabel(i, k, x));\n        }\n      });\n    }\n\n    const sortedLabels = labels.sort(GridColumnLabel.compare);\n\n    for (let i = 0; i < sortedLabels.length - 1; i++) {\n      const current = sortedLabels[i];\n      const next = sortedLabels[i + 1];\n\n      if (GridColumnLabel.equals(current, next)) {\n        continue;\n      }\n\n      const value = next.absoluteValue - current.absoluteValue;\n      css.push(`[${current.label}] ${value}fr`);\n    }\n\n    css.push(`[${new GridColumnLabel(data.length - 1).label}] 0fr [end]`);\n    return css.join(\" \");\n  }\n\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Time } from \"./utils/time\";\nvar templateString = \"<style>\\r\\n    :host{\\r\\n        display: contents;\\r\\n    }\\r\\n\\r\\n    #line {\\r\\n    border-top: 1px #fff solid;\\r\\n    grid-column: start / end;\\r\\n    z-index: -1;\\r\\n    }\\r\\n    #label{\\r\\n        grid-column: 1\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<div id=\\\"line\\\"></div>\\r\\n<div id=\\\"label\\\"></div>\";\nimport Template from \"./utils/template\";\nimport { GridRowLabel } from \"./utils/grid-row-label\";\nexport class TimetableRow extends HTMLElement {\n  static get observedAttributes() {\n    return [\"data-time\"];\n  }\n\n  constructor(time) {\n    super();\n\n    _defineProperty(this, \"_line\", void 0);\n\n    _defineProperty(this, \"_label\", void 0);\n\n    this.attachShadow({\n      mode: \"open\"\n    }).appendChild(TimetableRow.template.clone());\n    this._label = this.shadowRoot.getElementById(\"label\");\n    this._line = this.shadowRoot.getElementById(\"line\");\n\n    if (time !== undefined) {\n      this.time = time;\n    }\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (newVal === null) {\n      return;\n    }\n\n    if (name === \"data-time\") {\n      this.update();\n    }\n  }\n\n  update() {\n    const time = this.time;\n    const startLabel = new GridRowLabel(time).label;\n    const endLabel = new GridRowLabel(time.add(Time.OneHour)).label;\n    this._label.innerText = time.toString();\n    this._label.style.gridRowStart = startLabel;\n    this._label.style.gridRowEnd = endLabel;\n    this._line.style.gridRow = startLabel;\n  }\n\n  hide() {\n    this._label.hidden = true;\n    this._line.hidden = true;\n  }\n\n  show() {\n    this._label.hidden = false;\n    this._line.hidden = false;\n  }\n\n  set time(time) {\n    this.dataset[\"time\"] = time.toString();\n  }\n\n  get time() {\n    return Time.parse(this.dataset[\"time\"]);\n  }\n\n}\n\n_defineProperty(TimetableRow, \"elementName\", \"mszgs-timetable-row\");\n\n_defineProperty(TimetableRow, \"template\", new Template(templateString));\n\ncustomElements.define(TimetableRow.elementName, TimetableRow);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar templateHtml = \"<style>\\r\\n  /*\\r\\n  Props:\\r\\n  --mszgs-timetable-header-label-monday\\r\\n  --mszgs-timetable-header-label-tuesday\\r\\n  --mszgs-timetable-header-label-wednesday\\r\\n  --mszgs-timetable-header-label-thursday\\r\\n  --mszgs-timetable-header-label-friday\\r\\n  --mszgs-timetable-header-label-saturday\\r\\n  --mszgs-timetable-header-label-sunday\\r\\n\\r\\n  --mszgs-timetable-min-width\\r\\n  */\\r\\n  .monday {\\r\\n    grid-row: header;\\r\\n    grid-column: c0 / c1;\\r\\n  }\\r\\n\\r\\n  .monday::after {\\r\\n    content: var(--mszgs-timetable-header-label-monday, \\\"Monday\\\");\\r\\n  }\\r\\n\\r\\n  .tuesday {\\r\\n    grid-row: header;\\r\\n    grid-column: c1 / c2;\\r\\n  }\\r\\n\\r\\n  .tuesday::after {\\r\\n    content: var(--mszgs-timetable-header-label-tuesday, \\\"Tuesday\\\");\\r\\n  }\\r\\n\\r\\n  .wednesday {\\r\\n    grid-row: header;\\r\\n    grid-column: c2 / c3;\\r\\n  }\\r\\n\\r\\n  .wednesday::after {\\r\\n    content: var(--mszgs-timetable-header-label-wednesday, \\\"Wednesday\\\");\\r\\n  }\\r\\n\\r\\n  .thursday {\\r\\n    grid-row: header;\\r\\n    grid-column: c3 / c4;\\r\\n  }\\r\\n\\r\\n  .thursday::after {\\r\\n    content: var(--mszgs-timetable-header-label-thursday, \\\"Thursday\\\");\\r\\n  }\\r\\n\\r\\n  .friday {\\r\\n    grid-row: header;\\r\\n    grid-column: c4 / c5;\\r\\n  }\\r\\n\\r\\n  .friday::after {\\r\\n    content: var(--mszgs-timetable-header-label-friday, \\\"Friday\\\");\\r\\n  }\\r\\n\\r\\n  .saturday {\\r\\n    grid-row: header;\\r\\n    grid-column: c5 / c6;\\r\\n  }\\r\\n\\r\\n  .saturday::after {\\r\\n    content: var(--mszgs-timetable-header-label-saturday, \\\"Saturday\\\");\\r\\n  }\\r\\n\\r\\n  .sunday {\\r\\n    grid-row: header;\\r\\n    grid-column: c6 / c7;\\r\\n  }\\r\\n\\r\\n  .sunday::after {\\r\\n    content: var(--mszgs-timetable-header-label-sunday, \\\"Sunday\\\");\\r\\n  }\\r\\n\\r\\n  .grid {\\r\\n    display: grid;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    position: relative;\\r\\n    background-color: #222;\\r\\n    color: #eee;\\r\\n    min-width: var(--mszgs-timetable-min-width, 550px);\\r\\n    transition: all 1s;\\r\\n    z-index: 0;\\r\\n  }\\r\\n\\r\\n  div {\\r\\n    text-align: center;\\r\\n    position: relative;\\r\\n  }\\r\\n\\r\\n  .contents {\\r\\n    display: contents;\\r\\n  }\\r\\n\\r\\n  .overflow {\\r\\n    overflow-x: auto;\\r\\n  }\\r\\n\\r\\n  .grid-line {\\r\\n    border-top: 1px #fff solid;\\r\\n    grid-column: start / end;\\r\\n    z-index: -1;\\r\\n  }\\r\\n</style>\\r\\n<div class=\\\"overflow\\\">\\r\\n  <div class=\\\"grid\\\">\\r\\n    <div id=\\\"header\\\" class=\\\"contents\\\">\\r\\n      <div id=\\\"monday\\\"    class=\\\"header monday\\\"></div>\\r\\n      <div id=\\\"tuesday\\\"   class=\\\"header tuesday\\\"></div>\\r\\n      <div id=\\\"wednesday\\\" class=\\\"header wednesday\\\"></div>\\r\\n      <div id=\\\"thursday\\\"  class=\\\"header thursday\\\"></div>\\r\\n      <div id=\\\"friday\\\"    class=\\\"header friday\\\"></div>\\r\\n      <div id=\\\"saturday\\\"  class=\\\"header saturday\\\"></div>\\r\\n      <div id=\\\"sunday\\\"    class=\\\"header sunday\\\"></div>\\r\\n    </div>\\r\\n    <div id=\\\"timeline\\\" class=\\\"contents\\\">\\r\\n    </div>\\r\\n    <div id=\\\"items\\\" class=\\\"contents\\\">\\r\\n      <slot></slot>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nimport Template from \"./utils/template\";\nimport { TimetableItem } from \"./timetable-item\";\nimport { ColumnData } from \"./utils/column-data\";\nimport { Time } from \"./utils/time\";\nimport { GridTemplateColumnsBuilder, GridTemplateRowBuilder } from \"./utils/grid-template-builders\";\nimport { parseDay } from \"./utils/day\";\nimport { TimetableRow } from \"./timetable-row\";\nconst template = new Template(templateHtml);\n\nclass IntersectCalculator {\n  constructor(arr) {\n    _defineProperty(this, \"_arr\", void 0);\n\n    this._arr = arr;\n  }\n\n  isIntersect(t1, t2) {\n    return t1.time.isIntersect(t2.time);\n  }\n\n  calc() {\n    const data = this._arr;\n    const graph = new Array(data.length);\n    data.forEach((item, index, array) => {\n      const int = [];\n      array.forEach((other, i) => {\n        if (item !== other && this.isIntersect(item, other)) {\n          int.push(i);\n        }\n      });\n      graph[index] = int;\n    }); //  console.log(graph);\n\n    /*\r\n    const done = new Map<number, ColumnData>();\r\n    const result = new Array<ColumnData>(data.length);\r\n    const re = graph\r\n      .map((v, i) => {\r\n        return { index: i, value: v };\r\n      })\r\n      .sort((a, b) => a.value.length - b.value.length);\r\n    */\n    //   console.log(re);\n\n    return;\n  }\n\n}\n\nexport class Timetable extends HTMLElement {\n  static get observedAttributes() {\n    return [\"data-from\", \"data-to\"];\n  }\n\n  constructor() {\n    super();\n\n    _defineProperty(this, \"_changeObserver\", void 0);\n\n    _defineProperty(this, \"_grid\", void 0);\n\n    _defineProperty(this, \"_timeline\", void 0);\n\n    _defineProperty(this, \"_rows\", void 0);\n\n    this.attachShadow({\n      mode: \"open\"\n    }).appendChild(template.clone());\n    this._grid = this.shadowRoot.querySelector(\".grid\");\n    this._timeline = this.shadowRoot.querySelector(\"#timeline\");\n    this._rows = new Map();\n    this._changeObserver = new MutationObserver(this.update.bind(this));\n\n    this._changeObserver.observe(this, {\n      childList: true,\n      attributes: true,\n      attributeFilter: [\"data-time-start\", \"data-time-end\", \"data-day\"],\n      subtree: true\n    });\n  }\n\n  add(data) {\n    this.appendChild(new TimetableItem(data));\n  }\n\n  update() {\n    this.updateTemplateColumns();\n    this.updateTemplateRows();\n  }\n\n  updateTemplateColumns() {\n    const builder = new GridTemplateColumnsBuilder();\n\n    for (let i = 0; i <= this.days; i++) {\n      const items = this.items.filter(x => x.day === parseDay(i)).sort((a, b) => {\n        return Time.compare(a.timeStart, b.timeStart);\n      });\n\n      if (items.length === 0) {\n        builder.addColumn([1]);\n        continue;\n      }\n\n      new IntersectCalculator(items).calc();\n      const map = new Map();\n\n      for (const item of items) {\n        const set = new Set();\n\n        for (const otherItem of items) {\n          if (\n          /* item !== otherItem && */\n          item.time.isIntersect(otherItem.time)) {\n            set.add(otherItem);\n          }\n        }\n\n        map.set(item, set);\n      }\n\n      const config = new Map();\n\n      for (const item of items) {\n        const intersects = map.get(item);\n        const span = intersects.size;\n        config.set(item, new ColumnData(1, 0, span));\n      }\n\n      const columnData = [...config.values()].map(x => x.denominator).concat([1]);\n      builder.addColumn(columnData);\n    }\n\n    this._grid.style.gridTemplateColumns = builder.build();\n  }\n\n  updateTemplateRows() {\n    const builder = new GridTemplateRowBuilder();\n    const from = this.from;\n    const to = this.to;\n\n    if (from !== undefined) {\n      builder.addTime(this.from);\n    }\n\n    if (to !== undefined) {\n      builder.addTime(this.to);\n    }\n\n    this.items.forEach(x => {\n      builder.addTime(x.timeStart);\n      builder.addTime(x.timeEnd);\n    });\n    this._grid.style.gridTemplateRows = builder.build();\n    this.updateRows(builder.minTime(), builder.maxTime());\n  }\n\n  updateRows(from, to) {\n    //Hide all\n    this._rows.forEach(x => x.hide());\n\n    for (const time of Time.range(from.floor(), to.subtract(Time.OneHour))) {\n      const timeLabel = time.toString();\n\n      if (this._rows.has(timeLabel)) {\n        this._rows.get(timeLabel).show();\n      } else {\n        const newRow = new TimetableRow(time);\n\n        this._rows.set(timeLabel, newRow);\n\n        this._timeline.appendChild(newRow);\n      }\n    }\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (newVal === null) {\n      return;\n    }\n\n    if (name === \"data-days\") {\n      this.updateTemplateColumns();\n    } else if (name === \"data-from\" || name === \"data-to\") {\n      this.updateTemplateRows();\n    }\n  }\n\n  get from() {\n    const from = this.dataset[\"from\"];\n\n    if (from !== undefined) {\n      return Time.parse(from);\n    }\n\n    return undefined;\n  }\n\n  get to() {\n    const to = this.dataset[\"to\"];\n\n    if (to !== undefined) {\n      return Time.parse(this.dataset[\"to\"]);\n    }\n\n    return undefined;\n  }\n\n  get days() {\n    return 7; // parseInt(this.dataset[\"days\"]);\n  }\n\n  get items() {\n    return Array.from(this.querySelectorAll(TimetableItem.elementName));\n  }\n\n}\n\n_defineProperty(Timetable, \"elementName\", \"mszgs-timetable\");\n\ncustomElements.define(Timetable.elementName, Timetable);"],"sourceRoot":""}